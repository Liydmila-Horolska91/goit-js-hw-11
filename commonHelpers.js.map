{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// https://pixabay.com/api?key=45176564-fb4661ac13389b43e2d38b088&q=dog\nconst BASE_URL = 'https://pixabay.com/';\nconst END_POINT = 'api/';\nconst KEY = '45229967-0ed54d12f3523f97afd78f48b';\nconst options = {};\nexport class NewsAPI {\n  query = '';\n  #pageSize = 10;\n  page = 1;\n  total_pages = 1;\n\n  getArticles() {\n    const PARAMS = new URLSearchParams({\n      key: KEY,\n      q: this.query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    });\n\n    const url = `${BASE_URL}${END_POINT}?${PARAMS}`;\n    console.log(url);\n    return fetch(url, options).then(res => res.json());\n  }\n\n  get pageSize() {\n    return this.#pageSize;\n  }\n}","export function articleTemplate(article) {\n  const {\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = article;\n  console.log(article);\n  return `<li class=\"list-el\">\n\n <a href=\"${article.largeImageURL}\"><img src='${article.webformatURL}' alt='${article.tags}'></a>\n  <div class=\"content\">\n    <div class=\"item\"><h3>Likes</h3><p>${article.likes}</p></div>\n    <div class=\"item\"><h3>Views</h3><p>${article.views}</p></div>\n     <div class=\"item\"><h3>Comments</h3><p>${article.comments}</p></div>\n    <div class=\"item\"><h3>Downloads</h3><p>${article.downloads}</p></div>\n </div>\n</li>\n`;\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { NewsAPI } from '/js/pixabay-api';\nimport { articleTemplate } from '/js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet gallery = new SimpleLightbox('.gallery a');\nconst loadElem = document.querySelector('.loader');\n\nhideSpinner();\n\nconst refs = {\n  formElem: document.querySelector('.js-search-form'),\n  articleListElem: document.querySelector('.js-article-list'),\n  btnLoadMore: document.querySelector('.js-btn-load'),\n  loadElem: document.querySelector('.js-loader'),\n};\n\nconst newsApi = new NewsAPI();\n\nrefs.formElem.addEventListener('submit', onFormSubmit);\n\nfunction onFormSubmit(e) {\n  e.preventDefault();\n  showSpinner();\n\n  newsApi.query = e.target.elements.query.value.trim();\n  newsApi.page = 1;\n\n  refs.articleListElem.innerHTML = '';\n\n  if (newsApi.query.trim() === '') {\n    hideSpinner();\n    iziToast.error({\n      message: 'Info Search input must be filled!',\n    });\n    return;\n  }\n\n  newsApi.getArticles()\n    .then(data => {\n      hideSpinner();\n      if (data.total === 0) {\n        iziToast.info({\n          title: 'Sorry,',\n          message: 'There are no images matching your search query. Please try again!',\n        });\n      }\n\n      newsApi.totalResult = data.totalResults;\n      renderArticles(data.hits);\n    })\n    .catch(err => {\n      hideSpinner();\n      newsApi.totalResult = 0;\n      iziToast.error({\n        title: 'Error',\n        message: err.message,\n      });\n    });\n}\n\nfunction articlesTemplate(articles) {\n  return articles.map(articleTemplate).join('');\n}\n\nfunction renderArticles(articles) {\n  const markup = articlesTemplate(articles);\n  refs.articleListElem.insertAdjacentHTML('beforeend', markup);\n  gallery.refresh();\n}\n\nfunction showSpinner() {\n  loadElem.classList.remove('visually-hidden');\n}\n\nfunction hideSpinner() {\n  loadElem.classList.add('visually-hidden');\n}\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n"],"names":["BASE_URL","END_POINT","KEY","options","NewsAPI","__publicField","__privateAdd","_pageSize","PARAMS","url","res","__privateGet","articleTemplate","article","gallery","SimpleLightbox","loadElem","hideSpinner","refs","newsApi","onFormSubmit","showSpinner","iziToast","data","renderArticles","err","articlesTemplate","articles","markup"],"mappings":"0qCACA,MAAMA,EAAW,uBACXC,EAAY,OACZC,EAAM,qCACNC,EAAU,CAAA,QACT,MAAMC,CAAQ,CAAd,cACLC,EAAA,aAAQ,IACRC,EAAA,KAAAC,EAAY,IACZF,EAAA,YAAO,GACPA,EAAA,mBAAc,GAEd,aAAc,CACZ,MAAMG,EAAS,IAAI,gBAAgB,CACjC,IAAKN,EACL,EAAG,KAAK,MACR,WAAY,QACZ,YAAa,aACb,WAAY,EAClB,CAAK,EAEKO,EAAM,GAAGT,CAAQ,GAAGC,CAAS,IAAIO,CAAM,GAC7C,eAAQ,IAAIC,CAAG,EACR,MAAMA,EAAKN,CAAO,EAAE,KAAKO,GAAOA,EAAI,KAAI,CAAE,CAClD,CAED,IAAI,UAAW,CACb,OAAOC,EAAA,KAAKJ,EACb,CACH,CArBEA,EAAA,YCPK,SAASK,EAAgBC,EAAS,CAUvC,eAAQ,IAAIA,CAAO,EACZ;AAAA;AAAA,YAEGA,EAAQ,aAAa,eAAeA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA,yCAEjDA,EAAQ,KAAK;AAAA,yCACbA,EAAQ,KAAK;AAAA,6CACTA,EAAQ,QAAQ;AAAA,6CAChBA,EAAQ,SAAS;AAAA;AAAA;AAAA,CAI9D,CCfA,IAAIC,EAAU,IAAIC,EAAe,YAAY,EAC7C,MAAMC,EAAW,SAAS,cAAc,SAAS,EAEjDC,IAEA,MAAMC,EAAO,CACX,SAAU,SAAS,cAAc,iBAAiB,EAClD,gBAAiB,SAAS,cAAc,kBAAkB,EAC1D,YAAa,SAAS,cAAc,cAAc,EAClD,SAAU,SAAS,cAAc,YAAY,CAC/C,EAEMC,EAAU,IAAIf,EAEpBc,EAAK,SAAS,iBAAiB,SAAUE,CAAY,EAErD,SAASA,EAAa,EAAG,CASvB,GARA,EAAE,eAAc,EAChBC,IAEAF,EAAQ,MAAQ,EAAE,OAAO,SAAS,MAAM,MAAM,OAC9CA,EAAQ,KAAO,EAEfD,EAAK,gBAAgB,UAAY,GAE7BC,EAAQ,MAAM,KAAI,IAAO,GAAI,CAC/BF,IACAK,EAAS,MAAM,CACb,QAAS,mCACf,CAAK,EACD,MACD,CAEDH,EAAQ,YAAa,EAClB,KAAKI,GAAQ,CACZN,IACIM,EAAK,QAAU,GACjBD,EAAS,KAAK,CACZ,MAAO,SACP,QAAS,mEACnB,CAAS,EAGHH,EAAQ,YAAcI,EAAK,aAC3BC,EAAeD,EAAK,IAAI,CAC9B,CAAK,EACA,MAAME,GAAO,CACZR,IACAE,EAAQ,YAAc,EACtBG,EAAS,MAAM,CACb,MAAO,QACP,QAASG,EAAI,OACrB,CAAO,CACP,CAAK,CACL,CAEA,SAASC,EAAiBC,EAAU,CAClC,OAAOA,EAAS,IAAIf,CAAe,EAAE,KAAK,EAAE,CAC9C,CAEA,SAASY,EAAeG,EAAU,CAChC,MAAMC,EAASF,EAAiBC,CAAQ,EACxCT,EAAK,gBAAgB,mBAAmB,YAAaU,CAAM,EAC3Dd,EAAQ,QAAO,CACjB,CAEA,SAASO,GAAc,CACrBL,EAAS,UAAU,OAAO,iBAAiB,CAC7C,CAEA,SAASC,GAAc,CACrBD,EAAS,UAAU,IAAI,iBAAiB,CAC1C,CAEiB,IAAID,EAAe,aAAc,CAChD,aAAc,IACd,aAAc,KAChB,CAAC"}